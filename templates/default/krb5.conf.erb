# Generated by Chef for <%= node['fqdn'] %>
# Local modifications will be overwritten.
[logging]
 default = <%= node['krb5']['default_logging'] %>
 kdc = FILE:/var/log/krb5kdc.log
 admin_server = FILE:/var/log/kadmind.log

[libdefaults]
 default_realm = <%= node['krb5']['default_realm'].upcase %>
 dns_lookup_realm = false
 dns_lookup_kdc = <%= node['krb5']['lookup_kdc'] %>
 ticket_lifetime = <%= node['krb5']['ticket_lifetime'] %>
 renew_lifetime = <%= node['krb5']['renew_lifetime'] %>
 forwardable = <%= node['krb5']['forwardable'] %>

[realms]
 <% unless node['krb5']['default_realm_kdcs'].empty? -%>
 <%= node['krb5']['default_realm'].upcase %> = {
  <% node['krb5']['default_realm_kdcs'].each do |kdc_server| -%>
  kdc = <%= kdc_server %>
  <% end -%>
 }
 <% end -%>

 <% node['krb5']['realms'].each do |krb5_realm| -%>
 <%= krb5_realm.downcase -%> = <%= krb5_realm.upcase %>
 .<%= krb5_realm.downcase -%> = <%= krb5_realm.upcase %>
 <% end -%>

[appdefaults]
 pam = {
   debug = false
   ticket_lifetime = <%= node['krb5']['ticket_lifetime'] %>
   renew_lifetime = <%= node['krb5']['renew_lifetime'] %>
   forwardable = <%= node['krb5']['forwardable'] %>
   krb4_convert = false
 }
